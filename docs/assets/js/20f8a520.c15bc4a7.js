"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[9191],{781:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/12-9451b859ba590b4a0fb49b626a29791b.png"},1545:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/7-d1a512c9aee9f93843a398458b0cc957.png"},1755:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/5-5b9ce16c99c200edd31c3abd3d63ea1d.png"},1789:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/3-0f5ad6b8d6c6bfdaf7d0dde50b6684b6.png"},1993:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/16-2de2717c33db97c986dd99234df85cba.png"},2030:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/8-85430e7a1b7a73acc5c13681e27f6874.png"},2103:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/18-3e9d68052f6d3c28682cbfe8c674f168.png"},2606:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/19-18ce0829f319b26c5f3297198ea6faba.png"},3424:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/6-e03eb7fea150b68bb96c203bc1e941fa.png"},4519:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/9-9ef910fded06bb12b6ecc1a4d13ff50e.png"},4767:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/10-a1b90a2f14dcb896c995edee4cb1b41e.png"},5744:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/17-af90706287230f59768808bd0274bb03.png"},6930:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/4-e640e5e2cafa18ba499ce1bc8f33b11e.png"},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var r=n(6540);const i={},t=r.createContext(i);function l(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:s},e.children)}},8542:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/20-a22b35da8af83eae0a4c7775a825a7d7.png"},9058:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/15-4e1795f9ff708b6339aed3cfd76f0f6c.png"},9115:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"\u76f8\u5173\u6559\u7a0b/\u5176\u4ed6\u670d\u52a1\u914d\u7f6e","title":"\u5176\u4ed6\u670d\u52a1\u914d\u7f6e","description":"grafana \u7cfb\u5217\u3001\u5c0f\u7c73\u7403\u7b49\u914d\u7f6e\u6307\u5357","source":"@site/docs/\u76f8\u5173\u6559\u7a0b/\u5176\u4ed6\u670d\u52a1\u914d\u7f6e.md","sourceDirName":"\u76f8\u5173\u6559\u7a0b","slug":"/\u76f8\u5173\u6559\u7a0b/\u5176\u4ed6\u670d\u52a1\u914d\u7f6e","permalink":"/Lrobot/docs/\u76f8\u5173\u6559\u7a0b/\u5176\u4ed6\u670d\u52a1\u914d\u7f6e","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"grafana \u7cfb\u5217\u3001\u5c0f\u7c73\u7403\u7b49\u914d\u7f6e\u6307\u5357"},"sidebar":"tutorialSidebar","previous":{"title":"AtlasOS","permalink":"/Lrobot/docs/\u76f8\u5173\u6559\u7a0b/AtlasOS"}}');var i=n(4848),t=n(8453);const l={sidebar_position:5,description:"grafana \u7cfb\u5217\u3001\u5c0f\u7c73\u7403\u7b49\u914d\u7f6e\u6307\u5357"},a=void 0,c={},o=[{value:"grafana \u7cfb\u5217\u670d\u52a1\u914d\u7f6e\u6307\u5357",id:"grafana-\u7cfb\u5217\u670d\u52a1\u914d\u7f6e\u6307\u5357",level:2},{value:"\u65e5\u5fd7\u683c\u5f0f",id:"\u65e5\u5fd7\u683c\u5f0f",level:2},{value:"napcat",id:"napcat",level:4},{value:"xiaomiqiu",id:"xiaomiqiu",level:4},{value:"windows_exporter",id:"windows_exporter",level:4},{value:"prometheus",id:"prometheus",level:4},{value:"grafana",id:"grafana",level:4},{value:"loki",id:"loki",level:4},{value:"promtail",id:"promtail",level:4}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",h4:"h4",img:"img",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"grafana-\u7cfb\u5217\u670d\u52a1\u914d\u7f6e\u6307\u5357",children:"grafana \u7cfb\u5217\u670d\u52a1\u914d\u7f6e\u6307\u5357"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u4ece grafana ",(0,i.jsx)(s.a,{href:"https://grafana.com/zh-cn/grafana/?pg=graf&plcmt=hero-btn-1#grafana-versions",children:"\u5b98\u7f51"}),"\u4e0b\u8f7d grafana\uff0c\u5982\u8981\u66f4\u6539\u7aef\u53e3\u5219\u4fee\u6539 conf/defaults.ini \u7684 http_port = 5930"]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ece prometheus ",(0,i.jsx)(s.a,{href:"https://prometheus.io/download/",children:"\u5b98\u7f51"}),"\u4e0b\u8f7d prometheus"]}),"\n",(0,i.jsx)(s.li,{children:"\u914d\u7f6e prometheus.yml"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'global:\r\n  scrape_interval: 15s\r\n  evaluation_interval: 15s\r\n\r\nscrape_configs:\r\n  - job_name: "prometheus"\r\n    static_configs:\r\n      - targets: ["localhost:5926"]\r\n  - job_name: "windows_exporter"\r\n    static_configs:\r\n        - targets: ["localhost:5924"]\r\n  - job_name: "application_metrics"\r\n    static_configs:\r\n        - targets: [ "localhost:5925" ]\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u65b0\u5efa prometheus.bat ",(0,i.jsx)(s.code,{children:'prometheus.exe --config.file=prometheus.yml --web.listen-address=":5926"'})]}),"\n",(0,i.jsx)(s.li,{children:"\u9700\u8981\u5728\u672c\u5730\u7684 5923 \u914d\u7f6e\u4e00\u4e2a ws \u8fde\u63a5\uff0c\u5b9a\u65f6\u53d1\u9001 SERVICE_STATUS\uff08\u5b9a\u4e49\u7684 prometheus \u6307\u6807\uff09\uff0c\u63a5\u6536 grafana \u7684\u540e\u7aef\u8fd4\u56de\u7ed3\u679c"}),"\n",(0,i.jsxs)(s.li,{children:["\u4ece windows-exporter ",(0,i.jsx)(s.a,{href:"https://github.com/prometheus-community/windows_exporter/releases",children:"\u5b98\u7f51"}),"\u4e0b\u8f7d windows-exporter"]}),"\n",(0,i.jsx)(s.li,{children:"\u914d\u7f6e windows-exporter.yml"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'collectors:\r\n  enabled: cpu,cs,logical_disk,net,os,service,system\r\ncollector:\r\n  service:\r\n    include: "windows_exporter"\r\n  scheduled_task:\r\n    include: /Microsoft/.+\r\nlog:\r\n  level: debug\r\nscrape:\r\n  timeout-margin: 0.5\r\ntelemetry:\r\n  path: /metrics\r\n  max-requests: 5\r\nweb:\r\n  listen-address: ":5924"\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u65b0\u5efa windows-exporter.bat ",(0,i.jsx)(s.code,{children:'windows_exporter-0.30.0-beta.4-amd64.exe --config.file="windows_exporter.yml"'})]}),"\n",(0,i.jsxs)(s.li,{children:["\u8bbf\u95ee ",(0,i.jsx)(s.a,{href:"http://localhost:5926",children:"http://localhost:5926"})," \uff0c\u8bbf\u95ee",(0,i.jsx)(s.a,{href:"http://localhost:5924/metrics",children:"http://localhost:5924/metrics"})," \u786e\u8ba4 windows-exporter \u542f\u52a8\uff0c\u914d\u7f6e rate(interface_tx_bytes_total)"]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ece loki ",(0,i.jsx)(s.a,{href:"https://github.com/grafana/loki/releases",children:"\u5b98\u7f51"}),"\u4e0b\u8f7d loki"]}),"\n",(0,i.jsx)(s.li,{children:"\u914d\u7f6e loki.yml"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"auth_enabled: false\r\n\r\nserver:\r\n  http_listen_port: 5927\r\n  log_level: info\r\n\r\ncommon:\r\n  ring:\r\n    instance_addr: 127.0.0.1\r\n    kvstore:\r\n      store: inmemory\r\n  replication_factor: 1\r\n  path_prefix: loki\r\n\r\nschema_config:\r\n  configs:\r\n  - from: 2020-05-15\r\n    store: tsdb\r\n    object_store: filesystem\r\n    schema: v13\r\n    index:\r\n      prefix: index_\r\n      period: 24h\r\n\r\nstorage_config:\r\n  filesystem:\r\n    directory: chunks\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u65b0\u5efa loki.bat ",(0,i.jsx)(s.code,{children:"@echo off \\n chcp 65001 \\n loki-windows-amd64.exe -config.file=loki.yml"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ece loki ",(0,i.jsx)(s.a,{href:"https://github.com/grafana/loki/releases",children:"\u5b98\u7f51"}),"\u4e0b\u8f7d promtail"]}),"\n",(0,i.jsx)(s.li,{children:"\u914d\u7f6e promtail.yml"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"server:\r\n  http_listen_port: 5928\r\n  grpc_listen_port: 0\r\npositions:\r\n  filename: positions.yaml\r\nclients:\r\n  - url: http://localhost:5927/loki/api/v1/push\r\nscrape_configs:\r\n- job_name: service_logs\r\n  static_configs:\r\n  - targets:\r\n      - localhost\r\n    labels:\r\n      job: service_logs\r\n      __path__: ../service.log\r\n  pipeline_stages:\r\n    - json:\r\n        expressions:\r\n          level: level\r\n          time: time\r\n          service: service  # \u4ece\u65e5\u5fd7\u5185\u5bb9\u4e2d\u63d0\u53d6 service \u5b57\u6bb5\u4f5c\u4e3a\u6807\u7b7e\r\n          message: message\r\n    - labels:\r\n        level: level\r\n        time: time\r\n        service: service  # \u4ece\u65e5\u5fd7\u5185\u5bb9\u4e2d\u63d0\u53d6 service \u5b57\u6bb5\u4f5c\u4e3a\u6807\u7b7e\r\n        message: message\r\n- job_name: robot_logs\r\n  static_configs:\r\n  - targets:\r\n      - localhost\r\n    labels:\r\n      job: robot_logs\r\n      __path__: ../robot.log\r\n  pipeline_stages:\r\n    - json:\r\n        expressions:\r\n          level: level\r\n          time: time\r\n          robot: robot\r\n          event: event\r\n          command: command\r\n          target: target\r\n          message: message\r\n    - labels:\r\n        level: level\r\n        time: time\r\n        robot: robot\r\n        event: event\r\n        command: command\r\n        target: target\r\n        message: message\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u65b0\u5efa promtail.bat ",(0,i.jsx)(s.code,{children:"@echo off \\n chcp 65001 \\n promtail-windows-amd64.exe -config.file=promtail.yml"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u5b89\u88c5\u5305 ",(0,i.jsx)(s.code,{children:"pip install prometheus_client"}),"\uff0c\u5c06 ",(0,i.jsx)(s.a,{href:"https://github.com/wwweibu/Lrobot/tree/master/storage/abandoned/service.py",children:"service.py"}),"\u91cc\u7684 start_services(),monitor_services() \u548c stop_services()\u5206\u522b\u653e\u5728 main \u91cc\u9762\u7684 start\u3001tasks\u3001stop \u4e2d\uff0c\u5c06\u6700\u540e\u9762\u7684 filter \u79fb\u52a8\u81f3 log.py\uff0c\u8fd0\u884c"]}),"\n",(0,i.jsx)(s.li,{children:"\u4ee5\u4e0a\u6240\u6709\u6587\u4ef6\u5939\u90fd\u653e\u7f6e\u5728 lrobot \u540c\u7ea7\u4f4d\u7f6e"}),"\n",(0,i.jsxs)(s.li,{children:["\u8bbf\u95ee ",(0,i.jsx)(s.a,{href:"http://localhost:3000",children:"http://localhost:3000"})," \uff0csettings-data sources-add data source\uff0c\u9009\u62e9 Prometheus \u548c Loki\uff0c\u5730\u5740\u5206\u522b\u4e3a ",(0,i.jsx)(s.a,{href:"http://localhost:5926",children:"http://localhost:5926"})," \u548c ",(0,i.jsx)(s.a,{href:"http://localhost:5927",children:"http://localhost:5927"})]}),"\n",(0,i.jsx)(s.li,{children:"\u5728\u4eea\u8868\u76d8\u4e2d\u6839\u636e windows-exporter \u914d\u7f6e\u4e0a\u4e0b\u884c\u7f51\u901f\uff1b\u8bbe\u7f6e loki \u67e5\u8be2\u9762\u677f\uff0c\u6839\u636e level \u548c robot \u7b5b\u9009\uff1b\u4f7f\u7528 web \u7ec4\u4ef6\u4e0e 5923 \u7aef\u53e3\u901a\u4fe1\uff0c\u5b9e\u73b0\u6307\u6807\u7684\u5c55\u793a\u4e0e\u53cd\u9988"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"\u65e5\u5fd7\u683c\u5f0f",children:"\u65e5\u5fd7\u683c\u5f0f"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u4ee5\u4e0b\u4e3a\u81ea\u542f\u52a8\u4e0e\u4ee3\u7801\u542f\u52a8\u7684\u65e5\u5fd7\u5bf9\u6bd4\uff0c\u65e5\u5fd7\u683c\u5f0f\u8f6c\u5316\u53ef\u4ee5\u5728",(0,i.jsx)(s.a,{href:"https://github.com/wwweibu/Lrobot/tree/master/storage/abandoned/service.py",children:"service.py"}),"\u4e2d\u627e\u5230"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"napcat",children:"napcat"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u81ea\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(1789).A+"",width:"1692",height:"715"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ee3\u7801\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(6930).A+"",width:"2371",height:"822"}),(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(1755).A+"",width:"2320",height:"780"})]}),"\n",(0,i.jsxs)(s.li,{children:['\u4ee3\u7801\u542f\u52a8\u4f1a\u591a\u51fa\u5f88\u591a\u53ef\u80fd\u662f node.js \u91cc\u9762\u51fa\u73b0\u800c\u5728\u63a7\u5236\u53f0\u91cc\u4e0d\u51fa\u73b0\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u628a\u8fd9\u4e9b\u4ee5"[]"\u5f00\u5934\u7684\u5185\u5bb9\u7b80\u5355\u5730\u8bc6\u522b\u8fdbdebug\u91cc\uff08\u5305\u62ec\u4f1a\u5728\u63a7\u5236\u53f0\u91cc\u51fa\u73b0\u7684',(0,i.jsx)(s.code,{children:"[NapCat Backend] Main Process ID:22820"}),"\uff09\u542f\u52a8\u7684 qq \u8fdb\u7a0b id"]}),"\n",(0,i.jsx)(s.li,{children:"\u65ad\u7f51\u540e\u4f1a\u663e\u793a:12-05 14:51:56 [info] LR5921 | \u8d26\u53f7\u72b6\u6001\u53d8\u66f4\u4e3a\u79bb\u7ebf"}),"\n",(0,i.jsx)(s.li,{children:"\u9519\u8bef\uff08warn\uff09\u7684\u6d4b\u8bd5\u8fd8\u6ca1\u6709\u627e\u5230\uff0c\u7b49\u5f85\u53d1\u9001\u6d88\u606f\u6d41\u7a0b\u642d\u5efa\u5b8c\u6210\u540e\u6d4b\u8bd5"}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsxs)(s.em,{children:["\u4fee\u6539\u540e\u8f93\u51fa\u76f8\u540c\u7684\u65e5\u5fd7\uff0c\u9664\u4e86\u4ece",(0,i.jsx)(s.code,{children:"[NapCat Backend]"})," \u5230",(0,i.jsx)(s.code,{children:"NapCat Shell App Loading..."}),"\u4e2d\u95f4\u76848\u884c\u4ecd\u7136\u4fdd\u7559"]})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.em,{children:"\u4fee\u6539\u540e\u53ef\u4ee5\u8bc6\u522b\u4e2d\u6587"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.em,{children:"\u4fee\u6539\u540e\u5ffd\u7565\u4e86 active \u90a3\u4e00\u53e5"})}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"xiaomiqiu",children:"xiaomiqiu"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u81ea\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(3424).A+"",width:"1702",height:"247"})]}),"\n",(0,i.jsx)(s.li,{children:"\u81ea\u542f\u52a8\u4f1a\u663e\u793a\u4e00\u4e2a\u72b6\u6001\u8868\uff0c\u6b63\u5e38\u662f connect\uff0c\u65ad\u7f51\u540e\u662f connecting"}),"\n",(0,i.jsxs)(s.li,{children:["\u6b63\u5e38\u542f\u52a8\u7684\u8f93\u51fa\u53ea\u6709\u51e0\u884c ",(0,i.jsx)(s.img,{alt:"\u6b63\u5e38\u542f\u52a8",src:n(1545).A+"",width:"2267",height:"194"}),"\uff0c\u5373\u4f7f\u7528\u8ddf loki \u4e00\u6837\u7684\u91cd\u5b9a\u5411\u65b9\u6cd5\uff0c\u5185\u90e8\u8f93\u51fa\u8bed\u53e5\u7684\u4f18\u5148\u7ea7\u4ecd\u7136\u9ad8\u4e8e\u63a7\u5236\u53f0\uff0c\u4f1a\u8f93\u51fa\u5230\u6700\u65b0\u65e5\u5fd7\u7684\u6587\u4ef6\u5939\u91cc"]}),"\n",(0,i.jsxs)(s.li,{children:["\u65e5\u5fd7\u8f93\u51fa ",(0,i.jsx)(s.img,{alt:"\u65e5\u5fd7\u8f93\u51fa",src:n(2030).A+"",width:"1754",height:"439"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4fee\u6539\u540e\u4ee3\u7801\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(4519).A+"",width:"2253",height:"432"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4f46\u5f53\u65ad\u7f51\u65f6\u4e0d\u4f1a\u628a\u65e5\u5fd7\u7b49\u7ea7\u8bbe\u4e3a error\uff0c\u9700\u8981\u5728 log \u91cc\u589e\u52a0\u5224\u65ad ",(0,i.jsx)(s.img,{alt:"\u9519\u8bef\u8f93\u51fa",src:n(4767).A+"",width:"1705",height:"174"})]}),"\n",(0,i.jsx)(s.li,{children:"\u65ad\u7f51\u65f6\u542f\u52a8\u4f1a\u76f4\u63a5\u8bbe\u4e3a error"}),"\n",(0,i.jsx)(s.li,{children:"\u53e6\u5916\uff0c\u8fd9\u4e2a\u4e5f\u662f go \u8bed\u8a00"}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.em,{children:"\u4fee\u6539\u540e\u7b80\u5316\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.em,{children:"\u4fee\u6539\u540e\u652f\u6301\u8bc6\u522b\u4e2d\u6587"})}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"windows_exporter",children:"windows_exporter"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u65e5\u5fd7\u8f83\u5c11\uff0c\u81ea\u542f\u52a8\u65f6\u4ec5\u4ec5\u6709\u51e0\u6761\u65e5\u5fd7\uff0c\u7136\u540e\u8bbf\u95ee /metrics \u6216 /health \u65f6\u53ea\u4f1a\u6709\u51e0\u6761debug ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(9574).A+"",width:"1989",height:"727"})]}),"\n",(0,i.jsx)(s.li,{children:"\u5f53\u7aef\u53e3\u88ab\u5360\u7528\u65f6\u7a0b\u5e8f\u4f1a\u76f4\u63a5\u7ec8\u6b62\u4e14\u6ca1\u6709\u4efb\u4f55\u65e5\u5fd7\uff0c\u9700\u8981\u9760 monitor \u53bb\u53d1\u73b0"}),"\n",(0,i.jsx)(s.li,{children:"\u5e76\u4e14\u8fd9\u4e2a\u4e5f\u662f go\uff0c\u5e76\u4e14\u521b\u5efa\u6587\u4ef6\u6bd4 loki \u6162\uff0cloki \u542f\u52a8\u975e\u5e38\u5feb\u5bfc\u81f4\u65e5\u5fd7\u6587\u4ef6\u5fc5\u987b\u4ece\u5f00\u5934\u8bfb\uff0c\u8fd9\u4e2a\u542f\u52a8\u975e\u5e38\u6162\u5bfc\u81f41.\u5fc5\u987b\u7ed3\u675f\u540e\u5220\u9664\u65e5\u5fd7\u6587\u4ef62.\u5fc5\u987b\u5faa\u73af\u7b49\u5f85\u65e5\u5fd7\u6587\u4ef6\u8bfb\u53d6"}),"\n",(0,i.jsxs)(s.li,{children:["\u8c03\u8bd5\u5b8c\u6210\u540e\u65e5\u5fd7\uff08\u63a7\u5236\u53f0\u76f8\u540c\uff09 ",(0,i.jsx)(s.img,{alt:"txt\u65e5\u5fd7",src:n(781).A+"",width:"1873",height:"388"})]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"prometheus",children:"prometheus"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u81ea\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(9652).A+"",width:"1714",height:"1446"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ee3\u7801\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(9563).A+"",width:"2340",height:"959"})]}),"\n",(0,i.jsx)(s.li,{children:"\u5728\u5904\u7406 Prometheus \u8f93\u51fa\u7684\u65f6\u5019\u53d1\u73b0\u53ea\u9700\u8981 asyncio.create_subprocess_shell \u91cc\u9762\u4e0d\u52a0 pipe \u6355\u83b7\uff0c\u5c31\u53ef\u4ee5\u6b63\u5e38\u8f93\u51fa\uff08\u4f46\u4e0d\u80fd\u6355\u83b7\uff09 windows_exporter \u7684\u6240\u6709\u65e5\u5fd7\uff0c\u6545\u5220\u9664\u4e86\u4e4b\u524d\u7684\u903b\u8f91"}),"\n",(0,i.jsx)(s.li,{children:"\u7136\u540e\u53d1\u73b0 napcat \u8f93\u51fa\u4e0d\u52a0 pipe \u6355\u83b7\uff0c\u5c31\u6355\u83b7\u4e0d\u4e86\u65e5\u5fd7\u800c\u662f\u76f4\u63a5\u8f93\u51fa\u5230\u63a7\u5236\u53f0"}),"\n",(0,i.jsx)(s.li,{children:"\u7136\u540e\u6362 ai \u91cd\u6784\u4e86\u4ee3\u7801"}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"grafana",children:"grafana"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u81ea\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(9058).A+"",width:"1694",height:"779"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ee3\u7801\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(1993).A+"",width:"2288",height:"842"})]}),"\n",(0,i.jsx)(s.li,{children:"\u57fa\u672c\u4e00\u6837\uff0c\u4f46\u81ea\u542f\u52a8\u6709\u7279\u6b8a\u683c\u5f0f"}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"loki",children:"loki"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u81ea\u542f\u52a8(\u6bd4\u8f83\u6162) ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(5744).A+"",width:"1724",height:"848"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ee3\u7801\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(2103).A+"",width:"2379",height:"855"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4e00\u6837\u7684\uff0c\u542f\u52a8\u6bd4\u8f83\u6162\uff0c\u7136\u540e\u53ef\u4ee5\u4f7f\u7528 ",(0,i.jsx)(s.code,{children:"netstat -ano | findstr :5927\u548ctasklist | findstr 19528"}),"\u6765\u67e5\u770b loki \u662f\u5426\u6b63\u5e38\u5173\u95ed\uff08\u4f1a\u8fc7\u4e00\u4f1a\u5173\u95ed\uff09\uff0c",(0,i.jsx)(s.a,{href:"http://localhost:5927/metrics",children:"http://localhost:5927/metrics"})," \u548c ",(0,i.jsx)(s.a,{href:"http://localhost:5927/ready",children:"http://localhost:5927/ready"})," \u90fd\u53ef\u4ee5\u8bbf\u95ee"]}),"\n",(0,i.jsxs)(s.li,{children:["\u5728\u65e5\u5fd7\u5f52\u7c7b\u65f6\u53d1\u73b0\u4e86 loki \u5b58\u5728\u4e00\u4e9b\u4e0d\u542b msg \u7684\u65e5\u5fd7\uff1a",(0,i.jsx)(s.code,{children:'level=info ts=2024-12-09T08:03:21.0071912Z caller=metrics.go:386 org_id=fake traceID=400f7ba8831fd4c3 latency=fast query_type=stats start=2024-12-09T09:58:19+08:00 end=2024-12-09T09:59:30+08:00 start_delta=6h5m2.0071912s end_delta=6h3m51.0071912s length=1m11s duration=1.0007ms status=200 query=\\"{job=\\\\\\"logs\\\\\\", service=~\\\\\\"grafana\\\\\\", level=~\\\\\\".*\\\\\\"}\\" query_hash=3442096169 total_entries=1'})]}),"\n",(0,i.jsx)(s.li,{children:"\u6545\u628a caller \u540e\u9762\u7684\u5168\u90e8\u4f5c\u4e3a msg \u6d88\u606f\u63d0\u53d6"}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"promtail",children:"promtail"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u81ea\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u81ea\u542f\u52a8",src:n(2606).A+"",width:"1712",height:"843"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u4ee3\u7801\u542f\u52a8 ",(0,i.jsx)(s.img,{alt:"\u4ee3\u7801\u542f\u52a8",src:n(8542).A+"",width:"2374",height:"405"})]}),"\n",(0,i.jsx)(s.li,{children:"\u5355\u72ec\u542f\u52a8 promtail\uff0c\u4e0d\u542f\u52a8 loki \u65f6\u4f1a\u4e00\u76f4\u5c1d\u8bd5\u5f80loki\u53d1\u9001\u6d88\u606f"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},9563:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/14-c82ff4c7eabb96bf074b5baf5ce033c4.png"},9574:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/11-2f4eb27955ef4076900d46157147616e.png"},9652:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/13-699f67d83fd90a611aeef3c64868a562.png"}}]);