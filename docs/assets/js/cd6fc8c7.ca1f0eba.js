"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[3285],{6741:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"\u529f\u80fd\u673a\u5236/\u547d\u4ee4\u884c","title":"\u547d\u4ee4\u884c","description":"\u547d\u4ee4\u884c\u6267\u884c","source":"@site/docs/\u529f\u80fd\u673a\u5236/\u547d\u4ee4\u884c.md","sourceDirName":"\u529f\u80fd\u673a\u5236","slug":"/\u529f\u80fd\u673a\u5236/\u547d\u4ee4\u884c","permalink":"/Lrobot/docs/\u529f\u80fd\u673a\u5236/\u547d\u4ee4\u884c","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"description":"\u547d\u4ee4\u884c\u6267\u884c"},"sidebar":"tutorialSidebar","previous":{"title":"\u529f\u80fd\u673a\u5236","permalink":"/Lrobot/docs/category/\u529f\u80fd\u673a\u5236"},"next":{"title":"ip","permalink":"/Lrobot/docs/\u529f\u80fd\u673a\u5236/ip"}}');var r=n(4848),t=n(8453);const i={sidebar_position:1,description:"\u547d\u4ee4\u884c\u6267\u884c"},c=void 0,d={},l=[{value:"\u6267\u884c\u547d\u4ee4\u884c\u4ee3\u7801",id:"\u6267\u884c\u547d\u4ee4\u884c\u4ee3\u7801",level:2}];function a(e){const s={code:"code",h2:"h2",li:"li",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"\u6267\u884c\u547d\u4ee4\u884c\u4ee3\u7801",children:"\u6267\u884c\u547d\u4ee4\u884c\u4ee3\u7801"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"command \u5bb9\u5668\u4e2d\u4f7f\u7528 subprocess.Popen \u6765\u6267\u884c\u547d\u4ee4\u884c\u5185\u5bb9"}),"\n",(0,r.jsx)(s.li,{children:"\u547d\u4ee4\u884c\u5185\u5bb9\u9664\u4e86 ssh \u547d\u4ee4\uff0c\u8fd8\u6d4b\u8bd5\u8fc7 xiaomiqiu,napcat,grafana,loki,promtail,windows-exporter,prometheus"}),"\n",(0,r.jsxs)(s.li,{children:["\u4e00\u5171\u6709 ",(0,r.jsx)(s.code,{children:"subprocess.check_output(xxx, stderr=subprocess.STDOUT)"})," \u548c ",(0,r.jsx)(s.code,{children:"subprocess.run(xxx,stdout=subprocess.PIPE,stderr=subprocess.PIPE)"})," \u548c ",(0,r.jsx)(s.code,{children:"subprocess.Popen(xxx,stdout=subprocess.PIPE,stderr=subprocess.PIPE)"})," \u548c ",(0,r.jsx)(s.code,{children:"subprocess.Popen(xxx,stdout=subprocess.PIPE,stderr=subprocess.STDOUT)"})," \u56db\u79cd\u65b9\u6cd5"]}),"\n",(0,r.jsx)(s.li,{children:"\u5176\u4e2d\u53ea\u6709\u6700\u540e\u4e00\u79cd\u5c06 err \u7ba1\u9053\u91cd\u5b9a\u5411\u5230 out \u7ba1\u9053\u7684\u624d\u80fd\u517c\u5bb9\u6240\u6709\u7684\u547d\u4ee4\u884c\u65e5\u5fd7\u8f93\u51fa\uff0c\u539f\u56e0\u53ef\u80fd\u4e3a loki \u91c7\u7528\u7684 go \u8bed\u8a00\u4e2d\u7684\u65e5\u5fd7\u8f93\u51fa\u6d41\u4e0d\u592a\u4e00\u6837\uff0c\u5176\u4ed6\u65b9\u5f0f\u65e0\u6cd5\u6355\u83b7"}),"\n",(0,r.jsxs)(s.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(s.code,{children:"async for line"})," \u4ee3\u66ff ",(0,r.jsx)(s.code,{children:"while True:line = await process.stdout.readline()"}),"\uff0c\u8ba9\u51fd\u6570\u5185\u8c03\u7528\u81ea\u8eab\uff08\u91cd\u65b0\u6267\u884c\u547d\u4ee4\u884c\uff09\u4e5f\u4e0d\u4f1a\u963b\u585e\u8f93\u51fa"]}),"\n",(0,r.jsx)(s.li,{children:"\u5728\u4e3b\u7a0b\u5e8f\u9000\u51fa\u65f6\uff0c\u4e3b\u5faa\u73af\u9000\u51fa\uff0c\u5404\u4efb\u52a1\u7ed3\u675f\u3002\u5728 try-finally \u4e2d\uff0c\u53ea\u6709\u4f7f\u7528 process.communicate() \u624d\u80fd\u6355\u83b7\u547d\u4ee4\u884c\u4efb\u52a1\u9000\u51fa\u65f6\u7684\u8f93\u51fa\uff0c\u65e0\u8bba\u662f\u4f7f\u7528 signal \u6a21\u62df Ctrl+C \u4fe1\u53f7\u8fd8\u662f\u4f7f\u7528 process.wait() \u90fd\u65e0\u6cd5\u6355\u83b7"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679c\u91c7\u7528\u5199\u5165\u6587\u4ef6\u7684\u5f62\u5f0f\u4f1a\u8f93\u51fa\u4e0d\u53ca\u65f6\uff0c\u4e14\u7a0b\u5e8f\u9000\u51fa\u65f6\u9700\u8981\u989d\u5916\u7684\u7b49\u5f85\u4ee3\u7801\u6765\u786e\u4fdd\u65e5\u5fd7\u6587\u4ef6\u5199\u5b8c"}),"\n",(0,r.jsxs)(s.li,{children:["ssh \u7531\u4e8e\u81ea\u8eab\u8c03\u7528\u81ea\u8eab\u65e0\u6cd5\u6d88\u9664\u73af\u5883\u5f71\u54cd\uff0c\u6240\u4ee5\u91c7\u7528\u8fde\u63a5\u5931\u8d25\u76f4\u63a5\u9000\u51fa ",(0,r.jsx)(s.code,{children:"sys.exit(1)"})," + \u5bb9\u5668 ",(0,r.jsx)(s.code,{children:"restart: always"})," \u6765\u91cd\u65b0\u542f\u52a8"]}),"\n",(0,r.jsx)(s.li,{children:"xiaomiqiu \u9700\u8981\u6dfb\u52a0 -log stdout \u53c2\u6570\uff0c\u4e0d\u7136\u9ed8\u8ba4\u6ca1\u6709\u547d\u4ee4\u884c\u8f93\u51fa\u53ea\u6709\u6587\u4ef6\u8f93\u51fa"}),"\n",(0,r.jsxs)(s.li,{children:["\u547d\u4ee4\u884c\u547d\u4ee4\u4e2d\u52a0\u4e0a ",(0,r.jsx)(s.code,{children:"@echo off"}),"\u53ef\u4ee5\u4e0d\u6355\u83b7\u547d\u4ee4\u672c\u8eab\uff0c\u52a0\u4e0a ",(0,r.jsx)(s.code,{children:"chcp 65001"})," \u53ef\u4ee5\u9632\u6b62\u4e00\u4e9b\u4f7f\u7528 gbk \u7f16\u7801\u7684\u6587\u4ef6\u4e71\u7801\uff08\u7edf\u4e00\u4f7f\u7528 UTF-8)"]}),"\n",(0,r.jsx)(s.li,{children:"\u6b64\u65b9\u6cd5\u53ef\u4ee5\u6355\u83b7 Napcat \u4e2d\u7684\u8c03\u8bd5\u4ee3\u7801\uff08\u4e0d\u4f1a\u5728\u6b63\u5e38\u63a7\u5236\u53f0\u6267\u884c\u65f6\u51fa\u73b0"}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>c});var o=n(6540);const r={},t=o.createContext(r);function i(e){const s=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:s},e.children)}}}]);