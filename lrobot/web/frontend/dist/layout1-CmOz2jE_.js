function u(t){var l,r;if(!t||!t.classList.contains("layout1-container")){console.warn("Layout1Scale: 无效的容器元素");return}let e=t.querySelector(".layout1-content");if(!e){for(e=document.createElement("div"),e.className="layout1-content";t.firstChild;)e.appendChild(t.firstChild);t.appendChild(e)}let o,i;window.visualViewport?(o=window.visualViewport.width,i=window.visualViewport.height):(o=window.innerWidth,i=window.innerHeight);const n=o/i,s=16/9;if(t.classList.remove("wide-mode","narrow-mode"),n>=s){t.classList.add("wide-mode");const d=i,w=d*s;t._debug&&console.log("宽屏模式:",{windowSize:`${o}x${i}`,contentSize:`${w}x${d}`,ratio:n.toFixed(2),scale:((l=window.visualViewport)==null?void 0:l.scale)||1})}else{t.classList.add("narrow-mode");const d=i,w=d*s;t._debug&&console.log("窄屏模式:",{windowSize:`${o}x${i}`,contentSize:`${w}x${d}`,ratio:n.toFixed(2),scrollWidth:w-o,scale:((r=window.visualViewport)==null?void 0:r.scale)||1})}const c=new CustomEvent("layout1-resize",{detail:{container:t,windowWidth:o,windowHeight:i,ratio:n,mode:n>=s?"wide":"narrow",visualViewport:window.visualViewport?{width:window.visualViewport.width,height:window.visualViewport.height,scale:window.visualViewport.scale,offsetLeft:window.visualViewport.offsetLeft,offsetTop:window.visualViewport.offsetTop}:null}});t.dispatchEvent(c)}function a(){document.querySelectorAll(".layout1-container").forEach(e=>u(e))}function h(){let t=null;const e=()=>{t&&clearTimeout(t),t=setTimeout(()=>{a()},16)};window.addEventListener("resize",e),window.addEventListener("orientationchange",e),document.addEventListener("DOMContentLoaded",a),document.readyState==="complete"&&a()}function f(t){const e=window.innerWidth,o=window.innerHeight,i=e/o,n=16/9;return{windowWidth:e,windowHeight:o,currentRatio:parseFloat(i.toFixed(3)),targetRatio:n,mode:i>=n?"wide":"narrow",isWideMode:i>=n,isNarrowMode:i<n}}export{u as Layout1Scale,h as autoBindLayout1Events,u as default,f as getLayout1Status,a as initAllLayout1};
