import{_ as y,r as l,o as g,u as T,h as b,c as s,a as t,t as W,b as a}from"./index-DBG2GZUj.js";const P={class:"preview-container"},R=["src"],L={key:1,class:"text-preview"},M=["src"],A=["src"],B=["src"],I=["src"],U=["innerHTML"],C={key:7},E={__name:"Preview",setup(F){const v=T(),r=l(null),e=l(""),n=l(""),c=l(""),u=l("");g(async()=>{const d=v.params.path,i=await b.post("/preview",{path:d},{responseType:"blob",timeout:1e4});if(console.log(i),r.value=i.data,e.value=i.headers["content-type"],n.value=URL.createObjectURL(r.value),e.value.startsWith("text")){const o=new FileReader;o.onload=()=>{c.value=o.result},o.readAsText(r.value)}if(e.value==="text/markdown"){const o=new FileReader;o.onload=()=>{u.value=marked.parse(o.result)},o.readAsText(r.value)}});const p=s(()=>e.value==="application/pdf"),m=s(()=>e.value.startsWith("text")),_=s(()=>e.value.startsWith("video")),h=s(()=>e.value.startsWith("audio")),f=s(()=>e.value.startsWith("image")),w=s(()=>e.value==="application/msword"||e.value==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||e.value==="application/vnd.ms-excel"||e.value==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),x=s(()=>e.value==="text/markdown"),k=s(()=>e.value==="application/vnd.ms-powerpoint"||e.value==="application/vnd.openxmlformats-officedocument.presentationml.presentation");return(d,i)=>(a(),t("div",P,[p.value||k.value?(a(),t("iframe",{key:0,src:n.value,class:"preview-frame"},null,8,R)):m.value?(a(),t("pre",L,W(c.value),1)):_.value?(a(),t("video",{key:2,src:n.value,controls:"",width:"100%"},null,8,M)):h.value?(a(),t("audio",{key:3,src:n.value,controls:""},null,8,A)):f.value?(a(),t("img",{key:4,src:n.value,alt:"Image preview",width:"100%"},null,8,B)):w.value?(a(),t("iframe",{key:5,src:n.value,width:"100%",height:"600px"},null,8,I)):x.value?(a(),t("div",{key:6,innerHTML:u.value},null,8,U)):(a(),t("p",C,"不支持的文件类型"))]))}},O=y(E,[["__scopeId","data-v-4aa131b2"]]);export{O as default};
